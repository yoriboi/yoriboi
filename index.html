<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìš”ë¦¬ë³´ì´ ë ˆì‹œí”¼ë¶</title>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />
    <style>
        /* 1. ê¸°ë³¸ ì„¤ì •: ê¹”ë”í•œ í°íŠ¸ì™€ ë°°ê²½ */
        body { font-family: 'Pretendard', sans-serif; background-color: #ffffff; margin: 0; display: flex; justify-content: center; color: #333; }
        .container { width: 100%; max-width: 450px; min-height: 100vh; padding: 20px; box-sizing: border-box; }
        
        /* 2. í”„ë¡œí•„ ì˜ì—­: ì‹¬í”Œí•˜ê²Œ */
        .header { text-align: center; margin: 30px 0 20px 0; }
        .profile-img { width: 90px; height: 90px; border-radius: 50%; background: #f0f0f0; margin-bottom: 15px; object-fit: cover; border: 1px solid #eee; }
        .header h1 { font-size: 24px; font-weight: 700; margin: 0 0 5px 0; letter-spacing: -0.5px; }
        .header p { font-size: 14px; color: #888; margin: 0; }

        /* 3. ê²€ìƒ‰ì°½: ëˆˆì— ì˜ ë„ê³  ì…ë ¥í•˜ê¸° í¸í•˜ê²Œ */
        .search-wrap { position: sticky; top: 10px; z-index: 100; background: rgba(255,255,255,0.95); padding: 10px 0; backdrop-filter: blur(5px); }
        .search-box { 
            width: 100%; 
            padding: 14px 15px; 
            font-size: 16px; 
            border: 2px solid #eee; 
            border-radius: 12px; 
            background: #f9f9f9; 
            box-sizing: border-box; 
            transition: all 0.2s;
            font-family: inherit; /* í°íŠ¸ ìƒì† */
        }
        .search-box:focus { outline: none; border-color: #333; background: #fff; }
        .search-box::placeholder { color: #aaa; }

        /* 4. ë¦¬ìŠ¤íŠ¸: ì¹´ë“œ í˜•íƒœ */
        .card { 
            display: flex; align-items: center; 
            background: #fff; 
            border: 1px solid #f0f0f0; 
            border-radius: 12px; 
            padding: 12px; 
            margin-bottom: 10px; 
            text-decoration: none; 
            color: #333; 
            transition: transform 0.1s, background 0.1s; 
        }
        .card:active { transform: scale(0.98); background-color: #f5f5f5; }
        
        .card-img { width: 50px; height: 50px; border-radius: 10px; margin-right: 15px; background: #eee; object-fit: cover; flex-shrink: 0; }
        .card-content { flex: 1; min-width: 0; } /* ê¸€ì ë§ì¤„ì„ìš© */
        .card-title { font-weight: 600; font-size: 16px; margin-bottom: 2px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .card-link { font-size: 12px; color: #999; }

        /* ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ ë©”ì‹œì§€ */
        .no-result { text-align: center; margin-top: 50px; color: #aaa; display: none; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <img src="https://github.com/yoriboi.png" class="profile-img" onerror="this.src='https://ui-avatars.com/api/?name=YB&background=random'">
            <h1>ìš”ë¦¬ë³´ì´ ë ˆì‹œí”¼</h1>
            <p id="total-count">ë§›ìˆëŠ” ë ˆì‹œí”¼ ë¡œë”© ì¤‘...</p>
        </div>

        <div class="search-wrap">
            <input type="text" id="search" class="search-box" placeholder="ğŸ” ë¨¹ê³  ì‹¶ì€ ë©”ë‰´ ê²€ìƒ‰ (ì˜ˆ: ê¹€ì¹˜ì°Œê°œ)" autocomplete="off">
        </div>

        <div id="list"></div>
        <div id="no-result" class="no-result">ì°¾ìœ¼ì‹œëŠ” ë ˆì‹œí”¼ê°€ ì—†ì–´ìš” ğŸ˜¢</div>
    </div>

    <script>
        const listEl = document.getElementById('list');
        const countEl = document.getElementById('total-count');
        const noResultEl = document.getElementById('no-result');
        let recipes = [];

        // 1. ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        fetch('./links.json?v=' + Date.now())
            .then(res => res.json())
            .then(data => {
                recipes = data;
                countEl.innerText = `ì´ ${recipes.length}ê°œì˜ ë ˆì‹œí”¼ê°€ ìˆìŠµë‹ˆë‹¤`;
                render(recipes);
            })
            .catch(err => {
                countEl.innerText = "ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤";
                console.error(err);
            });

        // 2. ê²€ìƒ‰ ê¸°ëŠ¥ (í•µì‹¬!)
        document.getElementById('search').addEventListener('input', function(e) {
            const keyword = e.target.value.toLowerCase().replace(/\s/g, ''); // ì…ë ¥ê°’ ê³µë°± ì œê±°
            
            const filtered = recipes.filter(item => {
                // ì œëª©ì˜ ê³µë°±ë„ ì œê±°í•´ì„œ ë¹„êµ (ex: 'ê¹€ì¹˜ ì°Œê°œ' == 'ê¹€ì¹˜ì°Œê°œ')
                const title = item.title.toLowerCase().replace(/\s/g, ''); 
                return title.includes(keyword);
            });

            render(filtered);
        });

        // 3. í™”ë©´ ê·¸ë¦¬ê¸°
        function render(items) {
            listEl.innerHTML = ''; // ì´ˆê¸°í™”

            if (items.length === 0) {
                noResultEl.style.display = 'block'; // ê²°ê³¼ ì—†ìŒ í‘œì‹œ
            } else {
                noResultEl.style.display = 'none';
                items.forEach(item => {
                    const img = item.image || 'https://ui-avatars.com/api/?name=R&background=eee&color=999';
                    listEl.innerHTML += `
                        <a href="${item.link}" class="card" target="_blank">
                            <img src="${img}" class="card-img" onerror="this.src='https://ui-avatars.com/api/?name=Error'">
                            <div class="card-content">
                                <div class="card-title">${item.title}</div>
                                <div class="card-link">ë ˆì‹œí”¼ ë³´ëŸ¬ê°€ê¸° ğŸ‘‰</div>
                            </div>
                        </a>
                    `;
                });
            }
        }
    </script>
</body>
</html>
